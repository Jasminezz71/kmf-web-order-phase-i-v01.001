
@using ZEN.SaleAndTranfer.UI.Util
@model ZEN.SaleAndTranfer.UI.VM2.Usr.SearchVM2


@if (Model.Result != null && Model.Result.Count > 0)
{
    <div class="alert alert-success" role="alert">พบ @Model.SearchCountAll รายการ</div>
    @*<h5 class="text-success" style="padding-left:15px;">พบ @Model.SearchCountAll รายการ</h5>*@

    <table class="table table-hover">
        <thead>
            <tr>
                <th class="text-right">#</th>
                <th>Username</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Email</th>
                <th>Status</th>
                <th>Role</th>
                <th>Employee ID</th>
                <th>Branch Code</th>
                <th>...</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var det in Model.Result)
            {
                var formId = string.Format("formResetPwd_{0}", det.RowNumber);
            <tr>
                <th class="text-right">@det.RowNumber</th>
                <td>@det.USER_NAME</td>
                <td>@det.FIRST_NAME_TH</td>
                <td>@det.LAST_NAME_TH</td>
                <td>@det.EMAIL</td>
                <td>@det.StatusDisp</td>
                <td>@det.ROLE_NAME</td>
                <td>@det.EMPLOYEE_ID</td>
                <td>@det.BRANCH_CODE @det.BRANCH_NAME</td>
                <td>
                    @*<a href='@Url.Action("Do","Usr", new { id=det.USER_NAME })'>แก้ไข,ลบ</a>
                    <a href='@Url.Action("Do","Usr", new { id=det.USER_NAME })'>Reset Password</a>*@
                    <div class="dropdown">
                        <button class="btn btn-sm btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            คำสั่ง
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                            <li><a href='@Url.Action("Do", "Usr", new { Area = "", un=det.USER_NAME })'>รายละเอียด,แก้ไข,ลบ</a></li>
                            <li><a href='#' onclick="return resetPwd('#@formId');">Reset Password</a></li>
                        </ul>
                    </div>
                    <form id="@formId">
                        @Html.AntiForgeryToken()
                        <input type="hidden" id="Pet_Username" name="Pet.Username" value="@det.USER_NAME" />
                    </form>
                </td>
            </tr>
            }
        </tbody>
        <tfoot>
            <tr>
                <td class="text-center" colspan="10">
                    <nav aria-label="Page navigation">
                        <ul class="pagination">
                            <li>
                                <a onclick="return btnSearch_onclick('#formSearch',1);" aria-label="Previous">
                                    <span aria-hidden="true">&laquo;</span>
                                </a>
                            </li>
                            @{
                                var pageAmt = PagingHelper.GetPageAmount(Model.SearchCountAll, Model.Pet.PageSize);
                            }
                            @for (var i = 1; i <= pageAmt; i++)
                            {
                                var activePage = i == Model.Pet.CurrentPageId ? "active" : string.Empty;
                                <li class="@activePage"><a onclick="return btnSearch_onclick('#formSearch',@i);">@i</a></li>
                            }
                            <li>
                                <a onclick="return btnSearch_onclick('#formSearch',@pageAmt);" aria-label="Next">
                                    <span aria-hidden="true">&raquo;</span>
                                </a>
                            </li>
                        </ul>
                    </nav>
                </td>
            </tr>
        </tfoot>
    </table>
}
else
{
    <div class="alert alert-warning" role="alert">ไม่พบข้อมูล</div>
}
